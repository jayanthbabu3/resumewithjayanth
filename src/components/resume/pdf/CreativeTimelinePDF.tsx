import {Page,Text,View,Document,StyleSheet} from "@/lib/pdfRenderer";
import type{ResumeData}from"@/pages/Editor";
import{PDF_PAGE_MARGINS}from"@/lib/pdfConfig";
interface CreativeTimelinePDFProps{resumeData:ResumeData;themeColor?:string}
const createStyles=(c:string)=>StyleSheet.create({page:{fontFamily:"Inter",fontSize:10,backgroundColor:"#fff",padding:PDF_PAGE_MARGINS},header:{marginBottom:25,paddingLeft:15,borderLeftWidth:4,borderLeftColor:c},name:{fontSize:38,fontWeight:700,color:c,marginBottom:8},title:{fontSize:14,fontWeight:500,color:"#4b5563",marginBottom:12},contactInfo:{flexDirection:"row",flexWrap:"wrap",gap:12,fontSize:9,color:"#6b7280"},contactItem:{flexDirection:"row",alignItems:"center",gap:4},contactSquare:{width:4,height:4,backgroundColor:c},section:{marginBottom:25},sectionTitle:{fontSize:18,fontWeight:700,color:c,marginBottom:15},summary:{fontSize:12,color:"#4b5563",lineHeight:1.6,fontStyle:"italic"},timelineContainer:{position:"relative"},timelineLine:{position:"absolute",left:20,top:0,bottom:0,width:1,backgroundColor:"#e5e7eb"},experienceItem:{marginBottom:25,paddingLeft:50,position:"relative"},numberCircle:{position:"absolute",left:0,top:0,width:40,height:40,borderRadius:20,backgroundColor:c,borderWidth:4,borderColor:"#fff",color:"#fff",fontSize:14,fontWeight:700,textAlign:"center",paddingTop:10},box:{backgroundColor:"#f9fafb",padding:12,borderRadius:8},position:{fontSize:14,fontWeight:700},company:{fontSize:12,fontWeight:500,color:c,marginTop:4},dateRange:{fontSize:9,fontWeight:600,color:"#9ca3af",marginTop:4},description:{fontSize:10,color:"#4b5563",lineHeight:1.6,marginTop:6},descriptionItem:{marginBottom:2,paddingLeft:10},skillChip:{paddingHorizontal:12,paddingVertical:6,backgroundColor:"#f9fafb",borderRadius:16,fontSize:9,fontWeight:600,position:"relative"},skillDot:{position:"absolute",top:-2,right:-2,width:8,height:8,borderRadius:4,backgroundColor:c},educationItem:{flexDirection:"row",alignItems:"flex-start",gap:12,marginBottom:12},educationNumber:{width:30,height:30,borderRadius:15,backgroundColor:c,color:"#fff",fontSize:12,fontWeight:700,textAlign:"center",paddingTop:7},educationBox:{flex:1,backgroundColor:"#f9fafb",padding:10,borderRadius:8}});
export const CreativeTimelinePDF=({resumeData,themeColor="#f59e0b"}:CreativeTimelinePDFProps)=>{const s=createStyles(themeColor);const{personalInfo,experience,education,skills,sections}=resumeData;return(<Document><Page size="A4"style={s.page}><View style={s.header}><Text style={s.name}>{personalInfo.fullName}</Text>{personalInfo.title&&<Text style={s.title}>{personalInfo.title}</Text>}<View style={s.contactInfo}>{personalInfo.email&&<View style={s.contactItem}><View style={s.contactSquare}/><Text>{personalInfo.email}</Text></View>}{personalInfo.phone&&<View style={s.contactItem}><View style={s.contactSquare}/><Text>{personalInfo.phone}</Text></View>}{personalInfo.location&&<View style={s.contactItem}><View style={s.contactSquare}/><Text>{personalInfo.location}</Text></View>}</View></View>{personalInfo.summary&&<View style={s.section}><Text style={s.sectionTitle}>My Story</Text><Text style={s.summary}>{personalInfo.summary}</Text></View>}{experience&&experience.length>0&&<View style={s.section}><Text style={s.sectionTitle}>Journey</Text><View style={s.timelineContainer}><View style={s.timelineLine}/>{experience.map((exp,i)=><View key={i}style={s.experienceItem}><Text style={s.numberCircle}>{String(i+1).padStart(2,'0')}</Text><View style={s.box}><Text style={s.position}>{exp.position}</Text><Text style={s.company}>{exp.company}</Text><Text style={s.dateRange}>{exp.startDate} → {exp.endDate||"Present"}</Text>{exp.description&&<View style={s.description}>{exp.description.split("\n").map((item,j)=><Text key={j}style={s.descriptionItem}>• {item}</Text>)}</View>}</View></View>)}</View></View>}{skills&&skills.length>0&&<View style={s.section}><Text style={s.sectionTitle}>Toolkit</Text><View style={{flexDirection:'row',flexWrap:'wrap',gap:8}}>{skills.map((skill,i)=><View key={i}style={{position:'relative'}}><Text style={s.skillChip}>{skill.name}</Text><View style={s.skillDot}/></View>)}</View></View>}{education&&education.length>0&&<View style={s.section}><Text style={s.sectionTitle}>Learning Path</Text>{education.map((edu,i)=><View key={i}style={s.educationItem}><Text style={s.educationNumber}>{i+1}</Text><View style={s.educationBox}><Text style={s.position}>{edu.degree}</Text><Text style={[s.company,{color:"#4b5563"}]}>{edu.institution}</Text><Text style={s.dateRange}>{edu.graduationDate}</Text></View></View>)}</View>}{sections&&sections.map((sec,i)=><View key={i}style={s.section}><Text style={s.sectionTitle}>{sec.title}</Text><Text style={s.summary}>{sec.content}</Text></View>)}</Page></Document>)};
export default CreativeTimelinePDF;