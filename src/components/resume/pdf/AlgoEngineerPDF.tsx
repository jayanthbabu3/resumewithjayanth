import {Page,Text,View,Document,StyleSheet} from "@react-pdf/renderer";
import type{ResumeData}from"@/pages/Editor";
import{PDF_PAGE_MARGINS}from"@/lib/pdfConfig";
interface AlgoEngineerPDFProps{resumeData:ResumeData;themeColor?:string}
const createStyles=(c:string)=>StyleSheet.create({page:{fontFamily:"Inter",fontSize:14,backgroundColor:"#fff",padding:PDF_PAGE_MARGINS},header:{marginBottom:20,paddingBottom:15,borderBottomWidth:2,borderBottomColor:c,flexDirection:"row",alignItems:"flex-start",gap:15},icon:{width:40,height:40,borderRadius:20,backgroundColor:c,color:"#fff",fontSize:20,fontWeight:700,textAlign:"center",paddingTop:8},headerText:{flex:1},name:{fontSize:36,fontWeight:700,marginBottom:6},title:{fontSize:16,fontWeight:500,color:c,marginBottom:10},contactInfo:{flexDirection:"row",flexWrap:"wrap",gap:8,fontSize:14,color:"#6b7280"},section:{marginBottom:18},sectionTitle:{fontSize:24,fontWeight:700,color:c,marginBottom:12,flexDirection:"row",alignItems:"center",gap:6},arrow:{fontSize:18},summary:{fontSize:14,color:"#4b5563",lineHeight:1.6,paddingLeft:12},skillsGrid:{flexDirection:"row",flexWrap:"wrap",gap:8,paddingLeft:12},skillCard:{flex:"0 0 30%",paddingHorizontal:10,paddingVertical:8,backgroundColor:"#f9fafb",borderLeftWidth:2,borderLeftColor:c,fontSize:14,fontWeight:500},experienceItem:{marginBottom:14,paddingLeft:12,position:"relative"},dot:{position:"absolute",left:-6,top:6,width:8,height:8,borderRadius:4,backgroundColor:c},position:{fontSize:18,fontWeight:700},company:{fontSize:14,color:c,marginTop:2},dateRange:{fontSize:14,color:"#6b7280"},description:{fontSize:14,color:"#4b5563",lineHeight:1.5,marginTop:6,backgroundColor:"#f9fafb",padding:8,borderRadius:4},descriptionItem:{marginBottom:2,paddingLeft:10},arrow2:{color:c}});
export const AlgoEngineerPDF=({resumeData,themeColor="#f97316"}:AlgoEngineerPDFProps)=>{const s=createStyles(themeColor);const{personalInfo,experience,education,skills,sections}=resumeData;return(<Document><Page size="A4"style={s.page}><View style={s.header}><Text style={s.icon}>{"{}"}</Text><View style={s.headerText}><Text style={s.name}>{personalInfo.fullName}</Text>{personalInfo.title&&<Text style={s.title}>{personalInfo.title}</Text>}<View style={s.contactInfo}>{personalInfo.email&&<Text>{personalInfo.email}</Text>}{personalInfo.phone&&<Text>{personalInfo.phone}</Text>}{personalInfo.location&&<Text>{personalInfo.location}</Text>}</View></View></View>{personalInfo.summary&&<View style={s.section}><View style={{flexDirection:'row',alignItems:'center',gap:6,marginBottom:12}}><Text style={s.arrow}>{">"}</Text><Text style={{fontSize:14,fontWeight:700,color:themeColor}}>Profile</Text></View><Text style={s.summary}>{personalInfo.summary}</Text></View>}{skills&&skills.length>0&&<View style={s.section}><View style={{flexDirection:'row',alignItems:'center',gap:6,marginBottom:12}}><Text style={s.arrow}>{">"}</Text><Text style={{fontSize:14,fontWeight:700,color:themeColor}}>Technical Expertise</Text></View><View style={s.skillsGrid}>{skills.map((skill,i)=><Text key={i}style={s.skillCard}>{skill.name}</Text>)}</View></View>}{experience&&experience.length>0&&<View style={s.section}><View style={{flexDirection:'row',alignItems:'center',gap:6,marginBottom:12}}><Text style={s.arrow}>{">"}</Text><Text style={{fontSize:14,fontWeight:700,color:themeColor}}>Experience</Text></View><View style={{paddingLeft:12}}>{experience.map((exp,i)=><View key={i}style={s.experienceItem}><View style={s.dot}/><View style={{flexDirection:'row',justifyContent:'space-between',marginBottom:4}}><View style={{flex:1}}><Text style={s.position}>{exp.position}</Text><Text style={s.company}>{exp.company}</Text></View><Text style={s.dateRange}>{exp.startDate}-{exp.endDate||"Present"}</Text></View>{exp.description&&<View style={s.description}>{exp.description.split("\n").map((item,j)=><Text key={j}style={s.descriptionItem}><Text style={s.arrow2}>â–¸ </Text>{item}</Text>)}</View>}</View>)}</View></View>}{education&&education.length>0&&<View style={s.section}><View style={{flexDirection:'row',alignItems:'center',gap:6,marginBottom:12}}><Text style={s.arrow}>{">"}</Text><Text style={{fontSize:14,fontWeight:700,color:themeColor}}>Education</Text></View><View style={{paddingLeft:12}}>{education.map((edu,i)=><View key={i}style={{marginBottom:8,flexDirection:'row',justifyContent:'space-between'}}><View><Text style={s.position}>{edu.degree}</Text><Text style={[s.company,{color:"#4b5563"}]}>{edu.institution}</Text></View><Text style={s.dateRange}>{edu.graduationDate}</Text></View>)}</View></View>}{sections&&sections.map((sec,i)=><View key={i}style={s.section}><View style={{flexDirection:'row',alignItems:'center',gap:6,marginBottom:12}}><Text style={s.arrow}>{">"}</Text><Text style={{fontSize:14,fontWeight:700,color:themeColor}}>{sec.title}</Text></View><Text style={[s.summary,{paddingLeft:12}]}>{sec.content}</Text></View>)}</Page></Document>)};
export default AlgoEngineerPDF;